<template>
  <div class="preview-section">
    <h2 class="preview-title">üì± –ü—Ä–µ–≤—å—é –ø–∞–ª–∏—Ç—Ä—ã –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ</h2>
    
    <div class="theme-toggle">
      <button 
        :class="['theme-btn', { active: theme === 'light' }]"
        @click="theme = 'light'"
      >
        ‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞
      </button>
      <button 
        :class="['theme-btn', { active: theme === 'dark' }]"
        @click="theme = 'dark'"
      >
        üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
      </button>
    </div>

    <div class="preview-grid">
      <!-- –ö–Ω–æ–ø–∫–∏ -->
      <div :class="['preview-card', theme]">
        <h3 class="preview-heading" :style="{ color: colors[0] }">–ö–Ω–æ–ø–∫–∏</h3>
        <button 
          class="preview-button"
          :style="{ 
            backgroundColor: colors[0],
            color: getContrastColor(colors[0])
          }"
        >
          –û—Å–Ω–æ–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞
        </button>
        <button 
          class="preview-button"
          :style="{ 
            backgroundColor: colors[1],
            color: getContrastColor(colors[1]),
            marginTop: '10px'
          }"
        >
          –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞
        </button>
      </div>

      <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ -->
      <div 
        :class="['preview-card', theme]"
        :style="{ borderLeftColor: colors[2], borderLeftWidth: '4px' }"
      >
        <h3 class="preview-heading" :style="{ color: colors[2] }">–ö–∞—Ä—Ç–æ—á–∫–∞</h3>
        <p class="preview-text">–≠—Ç–æ –ø—Ä–∏–º–µ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞–ª–∏—Ç—Ä—ã —Ü–≤–µ—Ç–æ–≤. –¶–≤–µ—Ç–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ –∑–∞–≥–æ–ª–æ–≤–∫—É –∏ –≥—Ä–∞–Ω—è–º –∫–∞—Ä—Ç–æ—á–∫–∏.</p>
      </div>

      <!-- –¢–µ–≥–∏/Labels -->
      <div :class="['preview-card', theme]">
        <h3 class="preview-heading">–¢–µ–≥–∏ –∏ –±–µ–π–¥–∂–∏</h3>
        <div style="display: flex; gap: 8px; flex-wrap: wrap;">
          <span 
            v-for="(color, index) in colors"
            :key="index"
            :style="{ 
              backgroundColor: color,
              color: getContrastColor(color),
              padding: '6px 12px',
              borderRadius: '20px',
              fontSize: '0.9rem',
              fontWeight: '600'
            }"
          >
            Tag {{ index + 1 }}
          </span>
        </div>
      </div>

      <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
      <div :class="['preview-card', theme]">
        <h3 class="preview-heading">–ü—Ä–æ–≥—Ä–µ—Å—Å</h3>
        <div style="display: flex; gap: 4px;">
          <div 
            v-for="(color, index) in colors"
            :key="index"
            :style="{ 
              flex: 1,
              height: '8px',
              backgroundColor: color,
              borderRadius: '4px'
            }"
          />
        </div>
      </div>

      <!-- –¢–µ–∫—Å—Ç–æ–≤—ã–µ —É—Ä–æ–≤–Ω–∏ -->
      <div :class="['preview-card', theme]">
        <h3 class="preview-heading" :style="{ color: colors[0] }">–ò–µ—Ä–∞—Ä—Ö–∏—è —Ç–µ–∫—Å—Ç–∞</h3>
        <p :style="{ color: colors[0], fontWeight: '700', marginBottom: '8px' }">–û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫</p>
        <p :style="{ color: colors[1], fontWeight: '600', marginBottom: '8px' }">–í—Ç–æ—Ä–∏—á–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫</p>
        <p :style="{ color: colors[2], marginBottom: '8px' }">–û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç</p>
        <p :style="{ color: colors[3], fontSize: '0.9rem' }">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç</p>
      </div>

      <!-- –ê–∫—Ü–µ–Ω—Ç—ã -->
      <div :class="['preview-card', theme]">
        <h3 class="preview-heading">–ê–∫—Ü–µ–Ω—Ç–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã</h3>
        <div 
          :style="{ 
            backgroundColor: colors[4],
            color: getContrastColor(colors[4]),
            padding: '15px',
            borderRadius: '6px',
            marginBottom: '10px'
          }"
        >
          ‚ö° –ê–∫—Ü–µ–Ω—Ç–Ω—ã–π –±–ª–æ–∫
        </div>
        <div 
          :style="{ 
            borderLeft: `4px solid ${colors[5] || colors[0]}`,
            paddingLeft: '15px',
            fontSize: '0.95rem'
          }"
        >
          –ë–ª–æ–∫ —Å –ª–µ–≤—ã–º –∞–∫—Ü–µ–Ω—Ç–æ–º
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue';
import { getContrastColor } from '../utils/colorConverter';

const props = defineProps({
  colors: {
    type: Array,
    required: true
  }
});

const theme = ref('light');

const computedTheme = computed(() => {
  return theme.value === 'dark' 
    ? { background: '#1a1a1a', color: '#fff' }
    : { background: '#f5f5f5', color: '#333' };
});
</script>

<style scoped>
.preview-section {
  margin-top: 40px;
  padding-top: 40px;
  border-top: 2px solid #eee;
}

.preview-title {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 20px;
  color: #333;
}

.theme-toggle {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}

.theme-btn {
  padding: 8px 16px;
  border: 2px solid #ddd;
  background: white;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 600;
}

.theme-btn.active {
  background: #667eea;
  color: white;
  border-color: #667eea;
}

.preview-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
}

.preview-card {
  border-radius: 8px;
  padding: 20px;
  border: 2px solid #ddd;
  transition: all 0.3s ease;
}

.preview-card.light {
  background: #f5f5f5;
  color: #333;
}

.preview-card.dark {
  background: #1a1a1a;
  color: #fff;
  border-color: #333;
}

.preview-heading {
  font-size: 1.3rem;
  font-weight: 700;
  margin-bottom: 15px;
}

.preview-text {
  margin-bottom: 15px;
  line-height: 1.6;
}

.preview-button {
  padding: 10px 20px;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.preview-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

@media (max-width: 768px) {
  .preview-grid {
    grid-template-columns: 1fr;
  }
}
</style>
